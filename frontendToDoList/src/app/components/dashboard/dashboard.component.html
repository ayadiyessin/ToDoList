<div class="d-flex flex-column">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>To-Do List</h1>
        </div>
      </div>
    </div>
  </section>
  <div class="flex-grow-1 p-3">
    <div class="container-fluid">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <div class="w-50">
            <input type="text" class="form-control w-50" placeholder="Search To-Do List ..." [(ngModel)]="searchTerm"
              (ngModelChange)="onSearch()" />
          </div>
          <div>
            <button class="btn btn-outline-primary" (click)="addTodo()" data-tooltip="Add a new To-Do List"><i
                class="bi bi-plus-circle"></i> To-Do List</button>
          </div>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead class="table-light">
                <tr>
                  <th (click)="sort('id')">ID</th>
                  <th (click)="sort('title')">Title <span *ngIf="sortKey === 'title'">{{ sortDirection === 'asc' ? '↑' :
                      '↓' }}</span></th>
                  <th (click)="sort('description')">Description <span *ngIf="sortKey === 'description'">{{ sortDirection
                      === 'asc' ? '↑' : '↓' }}</span></th>
                  <th (click)="sort('createdAt')">Created at <span *ngIf="sortKey === 'createdAt'">{{ sortDirection ===
                      'asc' ? '↑' : '↓' }}</span></th>
                  <th>Tasks</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let todo of getPaginatedTodos();let i = index">
                  <td>{{ i+1 }}</td>
                  <td>{{ todo.title }}</td>
                  <td>{{ todo.description }}</td>
                  <td>{{ todo.createdAt }}</td>
                  <td>
                    <a data-tooltip="View all tasks" [routerLink]="['/task-details', todo.id]">Détails</a>
                  </td>
                  <td>
                    <button class="btn btn-outline-warning me-2" data-tooltip="Edit To-Do List"
                      (click)="editTodo(todo.id!)"><i class="bi bi-pencil"></i></button>
                    <button class="btn btn-outline-danger" data-tooltip="Delete To-Do List"
                      (click)="deleteTodo(todo.id!)"><i class="bi bi-trash3"></i></button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer d-flex justify-content-end">
          <nav aria-label="Page navigation">
            <ul class="pagination">
              <li class="page-item" [class.disabled]="currentPage === 1">
                <a class="page-link" (click)="setPage(currentPage - 1)" href="javascript:void(0);">Previous</a>
              </li>
              <li class="page-item" *ngFor="let page of getPageNumbers()" [class.active]="page === currentPage">
                <a class="page-link" (click)="setPage(page)" href="javascript:void(0);">{{ page }}</a>
              </li>
              <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                <a class="page-link" (click)="setPage(currentPage + 1)" href="javascript:void(0);">Next</a>
              </li>
            </ul>
          </nav>
        </div>

      </div>
    </div>
  </div>
</div>
